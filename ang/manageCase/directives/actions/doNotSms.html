<div ng-switch="info['stepName']" class="nosms__do-not-sms">

	<div class="nosms__step" ng-switch-when="confirmNumberStep">
		<div class="nosms__step-title">Enter phone number</div>
		<div class="nosms__step-description">The number will be use to find matching contacts.</div>
		<div class="nosms__step-body">
			<div class="nosms__step-logic">
				<input maxlength="25" class="input__text nosms__search-phone-number-input crm-form-text" type="text" ng-model="info.phoneNumber">
			</div>
			<div class="nosms__step-buttons">
				<button class="nosms__next-step-button" ng-disabled="info.phoneNumber.length === 0" ng-click="runStep('selectContactsStep')">Next</button>
			</div>
		</div>
	</div>

	<div class="nosms__step" ng-switch-when="selectContactsStep">
		<div class="nosms__step-title">Select contacts</div>
		<div class="nosms__step-description" ng-if="info['contacts'].length > 0" >Confirm all contacts for which "Do not SMS" should be set</div>
		<div class="nosms__step-body">
			<div class="nosms__step-logic">
				<div ng-if="info['contacts'].length > 0">
					<p>Contacts matching <strong>{{info['phoneNumber']}}</strong>:</p>
					<div class="nosms__contacts-wrap">
						<table class="crm-search-results">
							<thead>
								<tr>
									<th class="nosms__column-head">
										<div class="nosms__checkbox-wrap">
											<input ng-click="handleMainCheckbox($event)" class="nosms__checkbox nosms__checkbox-main" ng-checked="isSelectedAllContacts()" type="checkbox"/>
										</div>
									</th>
									<th class="nosms__column-head">Contact ID</th>
									<th class="nosms__column-head">Display Name</th>
									<th class="nosms__column-head">Do not SMS (current value)</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="contact in info['contacts']" class="nosms__row" data-contact-id="{{contact.id}}">
									<td>
										<div class="nosms__column">
											<div class="nosms__checkbox-wrap">
												<input class="nosms__checkbox" ng-model="contact['is_selected']" type="checkbox"/>
											</div>
										</div>
									</td>
									<td>
										<div class="nosms__column">
											{{contact.id}}
										</div>
									</td>
									<td>
										<div class="nosms__column">
											<span>
												<a href="{{contact.link}}" target="_blank">{{contact.display_name}}</a>
											</span>
										</div>
									</td>
									<td>
										<div class="nosms__column">
											<span>
												{{contact.is_do_not_sms == true ? 'yes' : 'no'}}
											</span>
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div ng-if="info['contacts'].length == 0">
					<p>Cannot find any contacts with phone number <strong>{{info['phoneNumber']}}</strong>.</p>
				</div>
			</div>
			<div class="nosms__step-buttons">
				<button class="nosms__next-step-button" ng-disabled="!isSelectedMinimumOneContacts()" ng-click="runStep('showSuccessMessageStep')">Confirm</button>
				<button class="button__cancel" ng-click="runStep('confirmNumberStep')">Back</button>
			</div>
		</div>
	</div>

	<div class="nosms__step" ng-switch-when="showSuccessMessageStep">
		<div class="nosms__step-title">Success</div>
		<div class="nosms__step-description">"Do not SMS" was set for these contacts:</div>
		<div class="nosms__step-body">
			<div class="nosms__step-logic">
				<ul ng-repeat="contact in info['contacts']">
					<li ng-if="contact['is_selected']"><a href="{{contact.link}}" target="_blank">{{contact.display_name}}</a></li>
				</ul>
			</div>
			<div class="nosms__step-buttons">
				<button class="nosms__next-step-button" ng-click="closeAction()">Close</button>
			</div>
		</div>
	</div>
</div>
